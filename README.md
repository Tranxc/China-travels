# China Travels 多人协作开发文档

## 一、项目概述

**项目名称：** China Travels —— 中国文化与景点交互探索平台
**开发模式：** 三人分工协作开发，Cloudflare Pages + Functions 部署

项目旨在打造一个结合地图交互与文化展示的网站，让用户可以探索中国的地理风貌与文化诗意。支持登录、收藏、评论等功能。

---

## 二、项目结构

```
China_travels/
│
├── functions/               # 云函数端逻辑目录（API层）
│   ├── [[path]].js          # 统一请求入口，根据路径分发逻辑
│   ├── auth.js              # 登录/注册逻辑（Resend邮箱服务）
│   ├── map.js               # 地图交互与数据获取
│   └── comment.js           # 评论接口（增删查）
│
├── src/                     # 前端代码目录
│   ├── pages/               # 页面文件夹
│   │   ├── index.html       # 首页展示
│   │   ├── culture.html     # 文化介绍页
│   │   ├── map.html         # 地图探索页
│   │   └── login.html       # 登录注册页
│   ├── js/                  # JS脚本
│   │   ├── main.js          # 首页逻辑与跳转
│   │   ├── culture.js       # 文化展示逻辑
│   │   ├── map.js           # 地图页面逻辑
│   │   └── auth.js          # 登录注册前端交互
│   └── css/
│       ├── style.css        # 通用样式
│       ├── culture.css      # 文化页样式
│       ├── map.css          # 地图页样式
│       └── auth.css         # 登录页样式
│
└── wrangler.toml            # Cloudflare 部署配置文件
```

---

## 三、功能说明

### （一）主要功能模块

1. **登录/注册**

   * 使用 **Resend 邮件服务** 完成邮箱注册与验证。
   * 用户信息通过 Cloudflare KV 或 D1 数据库存储。
   * 登录成功后可进入地图探索页。

2. **搜索跳转**

   * 用户输入地名 → 使用高德地图 API 搜索定位 → 地图中心移动至对应城市。

3. **地图交互**

   * 接入 **高德地图 Web API**。
   * 支持缩放、定位、双击查看详情、显示当前定位。

4. **收藏点击**

   * 用户可收藏喜欢的景点。
   * 收藏数据与用户绑定，存储在 Cloudflare D1 数据库中。

5. **评论景点**

   * 用户可对景点进行评论与删除自己的评论。
   * 评论显示在景点详情抽屉页右侧。

6. **文化诗词展示**

   * 展示与景点相关的中国古诗词或文化短文。
   * 提供滚动时间轴展示中国历史与文化变迁。

---

### （二）页面说明

#### 1. 首页展示

* **顶部栏：**

  * 左上角：简短介绍文字。
  * 右上角：导航按钮 —— 首页、文化介绍、登录/注册。
* **中间区域：**

  * 文化语录 + 介绍性文字。
  * “开始探索”按钮 → 跳转至地图页面。
* **底部：**

  * 版权说明。

#### 2. 文化介绍页面

* 滚动时间轴展示中国历史文化与景点演变。
* 视觉重点在于诗意与画卷感。
* 不需要登录即可访问。

#### 3. 登录/注册页面

* 邮箱注册。
* 通过 Resend API 发送验证邮件。
* 登录成功后跳转至地图探索页面。

#### 4. 探索地图页面

* **顶部栏：**

  * 左：搜索框 + 我的收藏按钮。
  * 中：提示语句“点击地图探索吧！”
  * 右：用户名 + 默认头像（后续可接 Cloudflare R2 存储）
* **中间区域：** 高德地图展示，仅显示中国范围。
* **右下角：** 控制区域（放大/缩小按钮 + 定位按钮）。
* **交互逻辑：**

  * 双击某地 → 显示地名介绍弹窗。
  * 若为著名城市 → 弹出“上滑抽屉页”显示详细景点介绍、图片与评论区。

---

## 四、接口与API需求

| 功能    | API/服务                           | 用途           |
| ----- | -------------------------------- | ------------ |
| 登录注册  | [Resend API](https://resend.com) | 邮箱验证与注册      |
| 地图展示  | 高德地图 Web JS API                  | 地图加载、缩放、定位   |
| 地理搜索  | 高德地点搜索 API                       | 搜索城市或景点      |
| 景点介绍  | 高德地理信息 API / 自建接口                | 获取地域文化描述     |
| 评论管理  | 自建 Cloudflare Functions API      | 评论增删查        |
| 收藏功能  | 自建 Cloudflare Functions API      | 用户收藏管理       |
| 文件存储  | Cloudflare R2（后期）                | 用户头像与图片上传    |
| 用户数据库 | Cloudflare D1 / KV               | 用户、评论、收藏数据存储 |

---

## 五、三人开发分工

| 成员               | 负责模块                              | 主要文件                                                               | 涉及API                    |
| ---------------- | --------------------------------- | ------------------------------------------------------------------ | ------------------------ |
| **A：前端逻辑与交互负责人** | 首页 + 地图页面前端 + 搜索与收藏交互             | `src/js/main.js`、`src/js/map.js`、`src/css/map.css`                 | 高德API、收藏API              |
| **B：文化与UI设计负责人** | 文化介绍页 + 样式布局 + 动效                 | `src/pages/culture.html`、`src/js/culture.js`、`src/css/culture.css` | 无（静态展示）                  |
| **C：后端逻辑与接口负责人** | Cloudflare Functions（登录、收藏、评论API） | `functions/auth.js`、`functions/comment.js`、`functions/map.js`      | Resend API、Cloudflare D1 |

**整合负责人（你）**：

* 负责代码合并、目录维护、wrangler 部署、API密钥管理。
* 组织多人提交（Git 分支管理）。

---

## 六、后续拓展

* 用户头像存储接入 Cloudflare R2。
* 景点数据来源可扩展为自建数据库或爬取百科信息。
* 评论可加入点赞与回复功能。
* 文化页可扩展为动态加载多媒体内容。

---

## 七、整合与部署说明

* 所有 API 通过 `functions/[[path]].js` 路由统一调度。
* 本地测试：`npx wrangler dev`
* 部署：`npx wrangler deploy`
* 前端页面通过 Cloudflare Pages 自动构建发布。
