<!-- 登录 / 注册弹窗 -->
<div id="auth-modal" class="auth-modal hidden">
  <div class="auth-content">
    <div class="auth-header">
      <h2 id="auth-title">邮箱验证</h2>
      <button class="close-btn" data-close-auth>&times;</button>
    </div>

    <!-- 步骤1: 邮箱验证 -->
    <div class="auth-pane" id="email-step">
      <form id="email-form">
        <input type="email" id="email-input" placeholder="请输入邮箱" required />
        <div class="error-message" id="email-error"></div>
        <div class="code-input-group">
          <input type="text" id="code-input" placeholder="验证码" required maxlength="6" />
          <button type="button" id="send-code-btn" class="send-code-btn">发送验证码</button>
        </div>
        <div class="error-message" id="code-error"></div>
        <button type="submit" class="auth-submit">登录/注册</button>
      </form>
    </div>

    <!-- 步骤2: 老用户密码验证 -->
    <div class="auth-pane hidden" id="login-step">
      <form id="login-form">
        <div class="email-display">
          <label>邮箱</label>
          <div id="login-email-display"></div>
        </div>

        <div class="form-group">
          <label>密码</label>
          <div class="password-group">
            <input type="password" id="login-password-input" placeholder="请输入密码" required minlength="6" />
            <button type="button" class="toggle-password" data-target="login-password-input" aria-label="显示密码"
              aria-pressed="false"></button>
          </div>
          <div class="error-message" id="login-password-error"></div>
        </div>

        <button type="submit" class="auth-submit">登录</button>
      </form>
    </div>

    <!-- 步骤3: 完善信息 (新用户) -->
    <div class="auth-pane hidden" id="register-step">
      <form id="register-form">
        <div class="form-group">
          <label>昵称</label>
          <input type="text" id="nickname-input" placeholder="请输入昵称" required maxlength="20" />
          <div class="error-message" id="nickname-error"></div>
        </div>

        <div class="form-group">
          <label>设置密码</label>
          <div class="password-group">
            <input type="password" id="password-input" placeholder="请设置密码" required minlength="6" />
            <button type="button" class="toggle-password" data-target="password-input" aria-label="显示密码"
              aria-pressed="false"></button>
          </div>
          <div class="error-message" id="password-error"></div>
        </div>

        <div class="form-group">
          <label>确认密码</label>
          <div class="password-group">
            <input type="password" id="confirm-password-input" placeholder="请再次输入密码" required />
            <button type="button" class="toggle-password" data-target="confirm-password-input" aria-label="显示密码"
              aria-pressed="false"></button>
          </div>
          <div class="error-message" id="confirm-password-error"></div>
        </div>

        <div class="email-display">
          <label>邮箱</label>
          <div id="user-email-display"></div>
        </div>

        <button type="submit" class="auth-submit">完成注册</button>
      </form>
    </div>
  </div>
</div>

<div class="backdrop hidden"></div>